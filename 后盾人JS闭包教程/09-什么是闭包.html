<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">

      // 子函数能使用其他函数的数据 就叫闭包
      function A(){
        let n = 1
        return function B(){
          console.log("B函数中的n===>"+n);
          console.log(++n);
        };
      }
      let a = A()
      a() //2
      a() //3


            // https://zhuanlan.zhihu.com/p/22486908

      // 什么是「闭包」？「函数」和「函数内部能访问到的变量」（也叫环境）的总和，就是一个闭包。
      // 函数套函数只是为了造出一个局部变量，跟闭包无关。把 return bar 改成 window.bar = bar 也是一样的，只要让外面可以访问到这个 bar 函数就行了。
      // 所以 return bar 只是为了 bar 能被使用，也跟闭包无关。
      // 「闭包」的作用是什么？闭包常常用来「间接访问一个变量」。换句话说，「隐藏一个变量」。
!function(){

  var lives = 50

  window.加一条命 = function(){
    lives += 1
  }

  window.减一条命 = function(){
    lives -= 1
  }

  //那么在其他的 JS 文件，就可以使用 window.奖励一条命() 来涨命，使用 window.死一条命() 来让角色掉一条命。

  console.log(lives);

}()

//  (function(){})() 和 (function(){})
// (function(){})()是匿名函数，主要利用函数内的变量作用域，避免产生全局变量，影响整体页面环境，增加代码的兼容性。
// (function(){})是一个标准的函数定义，但是没有赋值给任何变量。所以是没有名字的函数，叫匿名函数。没有名字就无法像普通函数那样随时随地调用了，
// 所以在他定义完成后就马上调用他，后面的括号()是运行这个函数的意思。

// 如下这些写法作用相同：
//  !function () { /* ... */ }();
//  ~function () { /* ... */ }();
//  -function () { /* ... */ }();
//  +function () { /* ... */ }();
//  void function () { /* ... */ }();
//  (function (){/*...*/}());
//  (function (){/*...*/})();
// ————————————————
// 版权声明：本文为CSDN博主「Albert Yang」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
// 原文链接：https://blog.csdn.net/qq_23853743/article/details/106757787


//闭包有什么好处?
//1.函数嵌套函数，内部函数可以引用外部函数的参数和变量
//2.参数和变量不会被垃圾回收机制所收回

    </script>
  </body>
</html>
